{% extends "chapter21/base.html" %}
{% block chapter_no %}21{% endblock %}
{% block exercise_no %}06{% endblock %}
{% block mycss %}{% endblock %}
{% block content %}
<div class="right">
    <div id="title">
        <h3>安全</h3>
        <p>对于未被授权系统有权访问某个资源的情况,我们称之为 CSRF(Cross-Site Request Forgery,跨站点请求伪造)。未被授权系统会伪装自己,让处理请求的服务器认为它是合法的。受到CSRF攻击的 Ajax程序有大有小,攻击行为既有旨在揭示系统漏洞的恶作剧,也有恶意的数据窃取或数据销毁。为确保通过XHR访问的 URL 安全,通行的做法就是验证发送请求者是否有权限访问相应的资源。有下列几种方式可供选择。</p>

    <ul>
        <li>要求以 SSL 连接来访问可以通过 XHR 请求的资源<span class="dsp">(有效)</span></li>
        <li>要求每一次请求都要附带经过相应算法计算得到的验证码<span class="dsp">(有效)</span></li>
        <li>要求发送 POST 而不是 GET 请求——很容易改变。<span class="epd">(无效!)</span></li>
        <li>检查来源 URL 以确定是否可信——来源记录很容易伪造。<span class="epd">(无效!)</span></li>
        <li>基于 cookie 信息进行验证——同样很容易伪造.<span class="epd">(无效!)</span></li>
    </ul>
    <p>XHR 对象也提供了一些安全机制,虽然表面上看可以保证安全,但实际上却相当不可靠。实际上,前面介绍的open()方法还能再接收两个参数:要随请求一起发送的用户名和密码。带有这两个参数的请求可以通过 SSL 发送给服务器上的页面,如下面的例子所示。</p>
    <pre><code>xhr.open("get", "example.php", true, "username", "password"); //不要这样做!!</code></pre>
   </div>
    <div id="footer">
        <p><a href="#title">返回顶端</a></p>
    </div>
</div>
{% endblock %}
{% block myjs %}
  <script>
  </script>
{% endblock %}
